<!DOCTYPE html>
<html>
<head>
<title>Lincastor Custom URL Handler</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
<meta http-equiv="content-language" content="en"></meta>
<meta name="viewport" content="width=device-width, initial-scale=1"></meta>
<link rel="stylesheet" href="theme/style.css">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MQLPZNT');</script>
<!-- End Google Tag Manager --><link rel="stylesheet" href="shared/style.css">
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MQLPZNT"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><header>
<main>

<nav>

<ul>
<li>[ <a href="index.html">❖</a> ]</li>
<li><a href="DNoteIt.html">DNoteIt</a></li>
<li><a href="LinCastorBrowser.html">LinCastor Browser</a>

<ul>
<li><a href="Custom-URL-Scheme-or-File-Extension.html">Custom URL Schemas and File Extensions</a></li>
<li><a href="https://github.com/onflapp/LinCastorBrowserPlugins">Sample Plugins</a></li>
</ul><div></div>
</li>
<li><a href="VipRiserPDFOps.html">VipRiser PDF Ops</a>

<ul>
<li><a href="Install-Virtual-Printer.html">PDF Print Driver</a></li>
<li><a href="Create-PDF-Action.html">Create PDF Workflows</a></li>
<li><a href="Enable-3rd-Party-Automator-Actions.html">Enable 3rd-party Automator Actions</a></li>
</ul><div></div>
</li>
<li><a href="BookMarkable.html">BookMarkable</a>

<ul>
<li><a href="https://github.com/onflapp/BookMarkablePlugins">Sample Plugins</a></li>
</ul><div></div>
</li>
<li><a href="TextSer.html">TextSer</a>

<ul>
<li><a href="https://github.com/onflapp/TextSerPlugins">Sample Plugins</a></li>
</ul><div></div>
</li>
<li><a href="Support.html">Support</a>

<ul>
<li><a href="DNoteIt-Support.html">DNoteIt</a></li>
<li><a href="LinCastorBrowser-Support.html">LinCastor Browser</a></li>
<li><a href="VipRiserPDFOps-Support.html">VipRiser PDF Ops</a></li>
<li><a href="VipRiser-Support.html">VipRiser</a></li>
<li><a href="BookMarkable-Support.html">BookMarkable</a></li>
<li><a href="TextSer-Support.html">TextSer</a></li>
<li><a href="OnFlApp-Privacy-Policy.html">OnFlApp Privacy Policy</a></li>
</ul><div></div>
</li>
</ul><div></div>


</nav>

</main>
</header>
<article>
<main>

<h1>Custom URL handlers</h1>

<p>The LinCastor’s primary job is to wait for an URL request and trigger a handler script which decides what to do next.</p>

<div class="text-align-center">

<p><img src="shared/e5ff48c020cb47eb-image-099c5b22b2b81387442d9a8aba10f714.png" alt=""></p>

</div>

<h3>What is an URL ‘scheme’</h3>

<p>Simply said, the URL scheme is the part before ‘:’ character (<a href="http://en.wikipedia.org/wiki/Uniform_Resource_Locator">URL Wikipedia</a>). So scheme of <a href="http://www.google.com/">http://www.google.com</a> is http, or foobar-my-<a href="http://a/b/c/d">http://a/b/c/d</a> is foobar-my-http. The OS X is able to map a scheme to an application. Therefore there can only be one browser application handling all web links at any one time and this is where LinCastor comes useful.</p>

<h3>Registering a scheme</h3>

<ol>
<li>Set title to anything you like.</li>
<li>Specify a scheme or list of schemes you want to handle. Adding a well known scheme such as http or ftp may ‘steal‘ it from already installed Application -  you should know what you are doing here. Use characters a-z, 0-9and ‘-‘ for custom scheme name (e.g. foo-bar is ok, whereas My.Url is not).</li>
<li>Choose a handler:</li>
</ol><div></div>


<h3>AppleScript</h3>

<p>Executes handle_run method with a dictionary as argument.</p>

<pre style="border: 1px solid lightgray; background-color: rgb(238, 238, 238); font-size: 9px; padding: 5px; overflow: hidden;"><code style="display: block; overflow-x: auto; padding: 0.5em; color: rgb(51, 51, 51);"><span>on</span> handle_url(arg)  
    display dialog <span style="color: rgb(221, 17, 68);">"handle url: "</span> &amp; |URL| <span style="color: rgb(51, 51, 51); font-weight: bold;">of</span> args   
end handle_url  
`<span></span>``<span>     

The dictionary contains following variables:    
</span></code></pre>

<p>URL          =&gt; my-<a href="http://myhost.domain.com:8080/mysite/a.html?search=blah#myanchor">http://myhost.domain.com:8080/mysite/a.html?search=blah#myanchor</a>
URL_SCHEME   =&gt; my-http
URL_HOST     =&gt; myhost.domain.com
URL_PORT     =&gt; 8080
URL_PATH     =&gt; /mysite/a.html
URL_QUERY    =&gt; ?search=blah
URL_FRAGMENT =&gt; <span class="cm-hash-tag cm-myanchor">myanchor</span></p>

<pre style="border: 1px solid lightgray; background-color: rgb(238, 238, 238); font-size: 9px; padding: 5px; overflow: hidden;"><code style="display: block; overflow-x: auto; padding: 0.5em; color: rgb(51, 51, 51);">Only URL parts that are parseable will appear <span style="color: rgb(51, 51, 51); font-weight: bold;">in</span> the dictionary.    
There <span style="color: rgb(51, 51, 51); font-weight: bold;">is</span> also special variable called URL_VALUE, it will contain anything after ‘:’ character. This <span style="color: rgb(51, 51, 51); font-weight: bold;">is</span> especially useful <span style="color: rgb(51, 51, 51); font-weight: bold;">for</span> URLs that <span style="color: rgb(51, 51, 51); font-weight: bold;">do</span> <span style="color: rgb(51, 51, 51); font-weight: bold;">not</span> comfort to the URL spec e.g. <span style="color: rgb(0, 128, 128);">message</span>:&lt;MESSAGE ID&gt; urls used <span style="color: rgb(51, 51, 51); font-weight: bold;">by</span> the Apple Mail.    
The url query parameters are parsed <span style="color: rgb(51, 51, 51); font-weight: bold;">in</span> following <span style="color: rgb(0, 128, 128);">way</span>:   
?search=blah&amp;flag=<span style="color: rgb(0, 128, 128);">2</span> would become    
</code></pre>

<p>URL_QUERY_SEARCH =&gt; blah
URL_QUERY_FLAG =&gt; 2</p>

<pre style="border: 1px solid lightgray; background-color: rgb(238, 238, 238); font-size: 9px; padding: 5px; overflow: hidden;"><code style="display: block; overflow-x: auto; padding: 0.5em; color: rgb(51, 51, 51);">E.i. URL_QUERY_ + parameter name. Note the upper case of the parameter name.    

The <span><span style="color: rgb(51, 51, 51); font-weight: bold;">handler</span> must <span style="color: rgb(51, 51, 51); font-weight: bold;">return</span> <span style="color: rgb(0, 128, 128);">1</span> <span style="color: rgb(51, 51, 51); font-weight: bold;">when</span> successful <span style="color: rgb(51, 51, 51); font-weight: bold;">or</span> <span style="color: rgb(0, 128, 128);">0</span> <span style="color: rgb(51, 51, 51); font-weight: bold;">in</span> <span style="color: rgb(51, 51, 51); font-weight: bold;">case</span> <span style="color: rgb(51, 51, 51); font-weight: bold;">of</span> an error. 

### Shell Script    

Executes a shell script. The variable <span style="color: rgb(51, 51, 51); font-weight: bold;">names</span> <span style="color: rgb(51, 51, 51); font-weight: bold;">are</span> the same <span style="color: rgb(51, 51, 51); font-weight: bold;">as</span> <span style="color: rgb(51, 51, 51); font-weight: bold;">for</span> the AppleScript <span style="color: rgb(51, 51, 51); font-weight: bold;">handler</span> <span style="color: rgb(51, 51, 51); font-weight: bold;">except</span> that they’ll be passed <span style="color: rgb(51, 51, 51); font-weight: bold;">to</span> the script <span style="color: rgb(51, 51, 51); font-weight: bold;">in</span> form <span style="color: rgb(51, 51, 51); font-weight: bold;">of</span> environmental <span style="color: rgb(51, 51, 51); font-weight: bold;">variables</span>.   
</span></code></pre>

<h1>!/bin/bash</h1>

<p>open -a Firefox $URL
exit 0
 ```</p>

<p>The script must exit with value of 0 when successful or non-zero value for an error.</p>

<p>Application - built-in handler</p>

<p>The handler will pass the URL to any application you specify here. Please note that not all applications know how to open an arbitrary URL, therefore it makes the most sense to use this handler in conjunction with  the remove prefix- setting.
The way this works is that you register well known scheme but prefix it with your own prefix.</p>

<p>For example, add chrome-http and associate it with application Google Chrome.
When you request an url with the chrome- prefix (e.g. chrome-<a href="http://gmail.google.com">http://gmail.google.com</a>), it will be passed to the Chrome application with the prefix removed. This allows you to control which application is used to open a particular URL.</p>

</main></article>
</body>
</html>
